Обслуживание операционных систем на рабочих станциях сводится к выполнению трех основных задач: первоначальная установка системного программного обеспечения и приложений, обновление системного программного обеспечения и приложений, настройка сетевых параметров. Если вам не удастся должным образом решить эти три задачи, если они не будут выполняться единообразно на всех системах или если вы будете вообще их игнорировать, остальная ваша работа значительно осложнится. Если у вас нет простого способа установки обновлений и патчей, у вас не будет и желания это делать. Если сетевые настройки не администрируются централизованно, например через DHCP-сервер, внесение даже минимальных изменений в параметры сети может принести вам немало проблем. Автоматизация этих задач значительно изменит ситуацию к лучшему. Рабочая станция в нашем понимании – компьютерное оборудование, выделенное для работы одного пользователя. С обслуживанием операционных систем рабочей станции связаны три критически важных аспекта: Первоначальная установка системного ПО и приложений. Обновление системного ПО и приложений. Настройка сетевых параметров. Если вы хотите, чтобы управление вашей сетью производилось с минимальными затратами, эти три задачи необходимо автоматизировать для любой платформы, которая используется в вашей сети. Если же в вашей сети есть лишь несколько узлов, являющихся различными платформами, создание полной автоматизации может и не требоваться. Не всегда просто автоматизировать некоторые процессы. Каждый поставщик ОС дает свое название системе автоматической установки ОС. Автоматизация решает огромное количество проблем, но не все из них являются техническими. Во-первых, автоматизация экономит деньги. Разумеется, одним из основных преимуществ является время, выигранное за счет замены ручных процессов автоматическими. Кроме того, автоматизация устраняет два вида скрытых затрат. Первый относится к ошибкам: при ручном выполнении процессов существует вероятность ошибок. Второй тип скрытых затрат относится к неоднородности. Если вы вручную устанавливаете операционную систему, вы никогда не добьетесь той же конфигурации на другой машине. Когда мы вручную устанавливали приложения на компьютеры, мы выяснили, что невозможно добиться одинаковой конфигурации приложений на разных машинах, сколько бы мы ни учили системных администраторов. В некоторых случаях техник забывал о той или иной настройке, в других случаях эти новые настройки были эффективнее. В результате пользователи зачастую обнаруживали, что их новые рабочие станции не были настроены должным образом. Или же пользователь при смене рабочих станций понимает, что их настройки отличаются, а в работе приложений возникают сбои. Автоматизация решает эту проблему. Настройка системы автоматической установки требует больших усилий. Однако в результате эти усилия окупятся и сэкономят вам больше времени, чем вы потратите на настройку. Самый важный аспект автоматизации заключается в том, что установка должна быть полностью автоматизирована. Когда вы решите, что закончили автоматизацию того или иного процесса, попросите опробовать вашу систему какого-нибудь человека, незнакомого с вашей работой. Проинструктируйте его одним предложением и больше ему не помогайте. Если у него возникнут проблемы, значит, вам необходимо улучшить данный аспект вашей системы. Повторяйте эту процедуру до тех пор, пока ваш помощник не сможет самостоятельно использовать систему. Частичная автоматизация лучше, чем ее полное отсутствие. До тех пор пока система установки не будет работать идеально, необходимо обеспечить какие-то временные средства для некоторых этапов. Отсутствие автоматизации может быть оправданно, если используется небольшое количество тех или иных платформ, если затраты на полную автоматизацию превышают экономию времени или если поставщик оказал нам медвежью услугу, сделав автоматизацию невозможной. Основная временная мера – документирование всего процесса, которое позволит впоследствии воспроизводить его в точности. В некоторых сетях для создания новых машин используется клонирование жестких дисков. Клонирование жесткого диска подразумевает создание узла с точной конфигурацией ПО, которая необходима для всех развертываемых узлов. Затем жесткий диск этого узла клонируется (копируется) на все новые компьютеры. Первую машину часто называют «золотым узлом». Вместо того чтобы снова и снова копировать жесткий диск, его содержимое можно скопировать на компакт-диск, ленточный накопитель или файловый сервер, которые впоследствии будут использоваться при установке. Какой бы способ установки ОС вы ни использовали – ручной или полностью автоматизированный, – вы можете улучшить согласованность процесса с помощью контрольных списков. Эти списки помогают удостовериться, что техники не пропустят ни одного этапа. Польза таких списков очевидна, если процесс установки полностью выполняется вручную. Даже если установку проводит один системный администратор, полностью уверенный в согласованности установки всех ОС, он поймет преимущества использования контрольных списков. И конечно же, эти списки могут послужить основой для системы обучения новых системных администраторов или подготовки толкового служащего, который будет выполнять эту работу в соответствии с пунктами списка. Даже если процесс установки ОС полностью автоматизирован, грамотный контрольный список все же может принести пользу. Некоторые действия невозможно автоматизировать, так как их необходимо выполнить физически. В ваш контрольный список могут входить и другие подобные задачи: обновление инвентаризационных описей, составление заказов на сетевые кабели (если их количество меньше определенного числа), проверка неделю спустя, не возникли ли у пользователей проблемы или какие-либо вопросы. С течением времени появляются прекрасные новые приложения, которые необходимо устанавливать. Все эти задачи относятся к области обновления программного обеспечения. Каждый поставщик дает собственное название своей системе автоматизации обновления ПО. Системы обновления ПО должны быть достаточно универсальными, чтобы они позволяли устанавливать новые приложения и обновлять уже имеющиеся, а также устанавливать патчи ОС. Если система способна только устанавливать патчи, новые приложения можно упаковать и использовать их в качестве патчей. Такие системы также можно использовать для внесения незначительных изменений на большом количестве узлов сети. Небольшие изменения конфигурации можно упаковать в патч и установить автоматически. Большинство систем позволяет включать постустановочные скрипты – программы, которые при запуске выполняют изменения, необходимые для установки пакета. Для внесения сложных изменений можно даже создать отдельный пакет, содержащий только постустановочный скрипт. Автоматизация обновления ПО схожа с автоматизацией первичной установки, но между ними есть и несколько существенных различий. Вот некоторые из них:  Узел сети находится в рабочем состоянии, Узел сети находится в офисе, Отсутствует необходимость в физическом доступе, Узел сети уже используется,  Узел сети может не находиться в «известном состоянии», Узел сети может использоваться сотрудниками в процессе обновления, Узел сети может отсутствовать, Узел сети может иметь мультисистемную загрузку.Далее рассмотрим последствия ошибок при установке патчей. Они отличаются от таковых при установке ОС. Пользователь, скорее всего, даже не узнает, были ли ошибки при установке ОС, так как до этого узел сети фактически не используется. Однако узел сети, на который устанавливается обновление, как правило, уже находится на рабочем столе сотрудника. Ошибки обновления, которые перевели машину в нерабочее состояние, гораздо заметнее и вызывают гораздо большее раздражение у пользователей. Автоматизированная система обновления потенциально способна нанести обширные повреждения. Весь процесс должен быть хорошо документирован, чтобы обеспечить максимальную степень управления риском. Необходимо обеспечить грамотное описание и повторяемость процесса, и вы должны пытаться улучшить его после каждого использования. Третий компонент, необходимый для сетей, объединяющих большое количество рабочих станций, – это способ автоматизации обновления сетевых параметров – тех считанных битов информации, от которой часто зависит загрузка компьютеров и их объединение в сеть. Эта информация может значительно различаться в отдельных подсетях или даже в отдельных узлах сети. А следовательно, такое обновление должно производиться иначе, чем, скажем, установка приложений, когда одно и то же приложение устанавливается на всех узлах сети с одинаковой конфигурацией. Поэтому система автоматизации обновления сетевых параметров обычно создается отдельно от остальных систем. Наиболее распространенная система автоматизации этого процесса – DHCP. Серверы DHCP от некоторых поставщиков настраиваются за несколько секунд, другие серверы – значительно дольше. Создание глобальной архитектуры DNS/ DHCP с десятками или сотнями сетей требует основательного планирования и специальных знаний. У некоторых поставщиков DHCP есть профессиональные обслуживающие организации, которые помогают в этом процессе, что особенно ценно для глобальных предприятий. Как правило, DHCP назначает отдельный IP-адрес каждому узлу сети. Функция динамической аренды адресов позволяет вам указать диапазон IP-адресов, которые можно присваивать узлам сети. Эти узлы смогут при каждом подключении к сети получать новый IP-адрес. Преимущество в том, что облегчается работа администраторов и повышается удобство для пользователей. Так как эта функция используется очень часто, многие считают, что адреса, назначаемые с помощью DHCP, должны распределяться именно так. На самом деле это не так. Зачастую лучше закрепить конкретный IP-адрес за конкретным узлом сети. Это особенно важно для серверов, чьи IP-адреса прописываются в конфигурационных файлах других узлов, таких как DNS-серверы и межсетевые экраны. Этот метод называется статическим назначением адресов в RFC или постоянной арендой адресов в DHCP-серверах компании Майкрософт. Нас не устраивает работа DHCP-систем, которые обновляют динамические DNSсерверы. Эта впечатляющее на первый взгляд свойство излишне усложняет систему и создает ненужный риск для безопасности. Управление сроками аренды может помочь в распределении обновлений. DHCPклиентам задается определенный набор параметров, который будет использоваться в течение определенного периода времени. По истечении этого периода они должны обновить свою аренду. Изменения вносятся во время обновления. Если пользователи будут иметь дело со стандартной конфигурацией, вам необходимо вовлечь их в процесс составления спецификаций и разработки1. В идеале пользователи должны принимать участие в процессе разработки с самого начала. Назначенные представители или заинтересованные руководители могли бы выбирать приложения, которые будут включены в конфигурацию. Однако в реальности платформы контролируются либо руководством, либо отделом системного администрирования, отвечающим за предоставление основной платформы, которую пользователи могут настраивать под себя. Вторые случаи более распространенны. В одной сети стандартной платформой для персонального компьютера считается его операционная система; самые необходимые приложения; приложения, требуемые компанией-учредителем; утилиты, которые наиболее часто просят установить пользователи и которые можно лицензировать оптом. Такая среда является очень открытой.  В заключение 3 главы хотелось бы сказать, что в этой главе мы рассмотрели процессы, связанные с обслуживанием операционных систем на настольных компьютерах. Настольные компьютеры, в отличие от серверов, как правило, развертываются в больших количествах, и все они обладают практически одной и той же конфигурацией. У каждого компьютера есть свой жизненный цикл, который начинается с установки ОС и заканчивается в тот момент, когда машину выключают в самый последний раз. Далее рассмотрим 4 главу. В отличие от рабочих станций, предназначенных для одного пользователя, от сервера зависит множество пользователей. Следовательно, главным приоритетом для них становится надежность и бесперебойная работа. Оборудование, продаваемое как сервер, качественно отличается от оборудования, приобретаемого для индивидуальной рабочей станции. Как правило, серверы поставляются с контрактом на обслуживание, системами резервного копирования, операционной системой и возможностью удаленного доступа. Кроме того, серверы размещают в вычислительных центрах с контролируемым микроклиматом и с ограниченным доступом к серверному оборудованию. Серверное оборудование обычно стоит дороже, но дополнительные возможности оправдывают вложения. Вот некоторые из этих возможностей: Расширяемость, Большая производительность центральных процессоров, Высокопроизводительные системы обмена информацией, Возможности модернизации, Возможность монтирования в стойку, Не требуется доступ с боковых сторон, Дополнения для повышенной надежности, Контракт на обслуживание, Альтернативные варианты управления. Поставщики постоянно совершенствуют конструкцию серверов для удовлетворения потребностей бизнеса. Расходы на серверное оборудование варьируется от назначения продукции. Так у большинства поставщиков есть три серии продукции: для дома, для бизнеса и серверное оборудование. Домашняя серия обычно продается по наименьшей начальной цене. Настольные компьютеры для бизнеса обычно разрабатываются с учетом общих затрат в течение всего срока их службы, поэтому закупочная цена выше, чем для домашних компьютеров. Серверные серии обычно ориентированы на наилучшее соотношение себестоимости и производительности. Поставщики увеличивают закупочную цену машины, но при этом повышают предполагаемое время бесперебойной работы, что делает соотношение цены и производительности более привлекательным. При покупке сервера продумайте, как будет происходить ремонт. Все машины рано или поздно ломаются. Поставщики все чаще предлагают самые разные дополнительные контракты на обслуживание. Вот несколько разумных сценариев: Не критически важный сервер, Большая группа идентичных серверов, Постепенная модернизация, Важные узлы, Большое количество моделей от одного поставщика, Критически важный узел. Нужно искать компромисс между хранением запасных частей и сервисным контрактом. Комплектование собственного склада запасных компонентов может быть слишком дорогостоящим для небольшой сети. Контракт на обслуживание включает диагностические услуги, хотя бы по телефону. На серверах хранятся критически важные данные и уникальные конфигурации, которые должны быть защищены. Клиентские рабочие станции, как правило, серийные и с однотипными конфигурациями, а их данные обычно хранятся на серверах, что снимает необходимость в резервном копировании. Если откажет диск рабочей станции, ее конфигурация должна быть идентичной многочисленным аналогичным машинам и немодифицированной по отношению к исходному состоянию, а следовательно, она может быть восстановлена с помощью автоматизированной процедуры установки. Серверы необязательно должны работать под управлением тех же ОС, что и их клиенты. Серверы могут быть совершенно другими, в точности такими же, или с той же базовой ОС, но с другой конфигурацией для иного предназначения. Для разных случаев подходят различные варианты. Например, веб-серверу не нужно работать под управлением той же ОС, что и у клиентских машин. Клиенты и сервер должны лишь использовать одинаковый протокол. На однофункциональных сетевых специализированных устройствах часто бывает установлена мини-ОС с программным обеспечением, минимально достаточным для выполнения единственной функции. Иногда на серверах требуется устанавливать все те же программы, что и на клиентах. Еще один интересный момент, характерный для серверной ОС, – ориентированность на перспективу. Для серверов необходима возможность удаленного обслуживания. Переключатель КВМ – устройство, позволяющее нескольким машинам использовать одну клавиатуру, видеоэкран и мышь (КВМ). Например, можно установить три сервера и три консоли в одну телекоммуникационную стойку. Однако благодаря коммутатору КВМ для этой стойки достаточно только одной клавиатуры, монитора и мыши. Таким образом, в ту же стойку можно установить большее количество серверов. Можно сэкономить еще больше места, если установить один коммутатор КВМ на ряд стоек или на весь вычислительный центр. Однако более крупные коммутаторы КВМ, как правило, чрезмерно дорогие. В настоящее время последовательные консольные концентраторы бывают двух видов: самодельные и специализированные. Самодельное решение подразумевает следующее: вы берете машину с множеством последовательных портов и программное обеспечение и сами создаете систему. Специализированное решение – готовая система от поставщика, которая обычно быстрее поддается настройке и оснащена программным обеспечением в виде прошивки или на твердотельном накопителе на флэш-памяти. Таким образом, вы избавлены от риска отказа жесткого диска. Последовательные консоли и переключатели КВМ дают следующее преимущество: они позволяют вам управлять системной консолью, если сеть не работает или если система в неисправном состоянии. Некоторые поставщики предоставляют карты расширения, которые позволяют удаленно управлять машиной. Удаленные консольные системы также позволяют имитировать всякие забавные сочетания клавиш, которые выполняют определенные функции при вводе в консоль. При приобретении серверного оборудования вам следует обратить особое внимание на то, какой тип удаленного доступа к консоли будет доступен и для решения каких задач может потребоваться такой доступ. В аварийной ситуации нет смысла и времени ждать, пока системные администраторы доберутся до физических устройств, чтобы все исправить. В штатных ситуациях у системных администраторов должна быть возможность исправить небольшие неполадки из дома, в дороге и, оптимально, возможность выполнить любую задачу через удаленное подключение. Однако у удаленного доступа есть очевидные ограничения из-за того, что отдельные задачи требуют присутствия человека возле машины. Удаленный доступ к консолям позволяет системным администраторам снизить затраты и улучшить факторы безопасности. Загрузочный диск, или диск с операционной системой, как правило, труднее всего заменить в случае его повреждения. Поэтому необходимо соблюдать особые меры безопасности, чтобы ускорить процесс восстановления. Для загрузочного диска каждого сервера необходимо создать зеркальный диск. Это означает, что установлено два диска и при любом обновлении основного диска тут же обновляется и второй. Если один из дисков откажет, система автоматически переключится на работоспособный диск. Большинство операционных систем позволяют сделать это программно, а многие контроллеры жестких дисков делают это на аппаратном уровне. С годами стоимость жестких дисков значительно снизилась, и эта некогда слишком дорогая возможность стала более доступной. Зеркалирование предполагает определенные компромиссы в отношении производительности. Операции чтения производятся быстрее, так как чтение идет параллельно с двух дисков. Без зеркального копирования сбой жесткого диска означает простой в работе. Благодаря зеркальному копированию сбой жесткого диска является событием, которое можно не только спокойно пережить, но и контролировать. Если неисправный диск можно заменить во время работы системы, сбой в работе одного компонента не приведет к простою. Если неисправные диски можно заменять только при отключенной системе, перерыв в работе можно запланировать в соответствии с потребностями компании. Благодаря этому простои в работе можем контролировать мы, не позволяя им контролировать нас. Далее рассмотрим устройства для повышения надежности и удобства. Одноцелевое устройство – устройство, созданное для выполнения одной конкретной задачи. Тостеры делают тосты. Миксеры смешивают. Те же действия можно выполнять и с помощью универсальных устройств, но есть определенные преимущества при использовании устройств, предназначенных для качественного выполнения одной конкретной задачи. По предрасположенности к сбоям среди всех системных компонентов на втором месте после жестких дисков находятся блоки питания. Поэтому в идеале серверы должны быть обеспечены резервными блоками питания. У каждого блока питания должен быть отдельный кабель питания. На практике самая распространенная причина проблем с питанием – случайно выдернутый из розетки кабель. Наличие резервных блоков питания не означает, что просто подключено два таких устройства. Это означает, что система сохраняет работоспособность, если один из блоков питания не функционирует: избыточность n + 1. Как уже упоминалось выше, избыточность n + 1 относится к системам, которые спроектированы таким образом, что система продолжает функционировать даже после сбоя одного из компонентов. Напротив, при полной избыточности два полных набора оборудования объединены в отказоустойчивую конфигурацию. Первая система обеспечивает исполнение службы, а вторая бездействует в полной готовности взять на себя работу при сбое первой системы. Переключение на резервные мощности может осуществляться вручную или автоматически. Другие системы с полной избыточностью используют распределение нагрузки. Обе системы полноценно функционируют и распределяют между собой рабочую нагрузку. Каждый сервер обладает достаточной мощностью, чтобы взять на себя всю нагрузку. Если в работе одной из систем возникает сбой, вторая система берет всю нагрузку на себя. Системы можно настроить таким образом, чтобы они отслеживали надежность работы друг друга. Либо можно использовать внешний источник управления потоками и распределением запросов на обслуживание. Резервные компоненты должны поддерживать «горячую» замену. «Горячая» замена подразумевает возможность отключить и заменить компонент во время работы системы. Как правило, компоненты следует заменять только при отключенной системе. Возможность «горячей» замены аналогична смене покрышки в тот момент, когда автомобиль мчится по шоссе. Очень удобно, когда не приходится останавливаться, чтобы устранить обычную проблему. Дополнительные сетевые интерфейсы на серверах позволяют создать раздельные административные сети. Например, часто создают отдельную сеть для резервного копирования и мониторинга. Резервное копирование требует высокой пропускной способности, и отделение этого трафика от основной сети означает, что резервное копирование не будет мешать пользователям работать с сетью. Подобную отдельную сеть можно спроектировать с помощью довольно простого оборудования, таким образом сделав ее более надежной. Но что самое важное, на эту сеть не будут влиять простои в работе основной сети. Кроме того, она дает системным администраторам возможность получить доступ к машине во время такого простоя. В заключение хотелось бы сказать, что приобретая серверы, мы принимаем различные решения, так как от серверов зависит деятельность множества пользователей, в то время как клиентская рабочая станция предназначена только для одного пользователя. В отличие от рынка настольных компьютеров, на рынке серверного оборудования важнейшее значение имеют иные экономические факторы. Знание этих факторов помогает принимать более грамотные решения при покупке. Серверы, как и любое другое оборудование, иногда дают сбои, поэтому необходимо заключить контракт на обслуживание или составить план восстановления, а также предусмотреть возможность резервного копирования и восстановления данных. Серверы должны располагаться в специальных машинных залах, обеспечивающих условия для надежной работы.
